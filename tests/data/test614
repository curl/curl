<testcase>
<info>
<keywords>
SFTP
pre-quote
directory
</keywords>
</info>

#
# Server-side
<reply>
<datacheck>
d?????????    N U         U               N ???  N NN:NN asubdir
wr-???????    1 U         U              37 Jan  1  2000 plainfile.txt
-r-???????    1 U         U              47 Dec 31  2000 rofile.txt
-r-???????    1 U         U              37 Jan  1  2000 upload.txt
</datacheck>
</reply>

#
# Client-side
<client>
<server>
sftp
</server>
<precheck>
%PERL %SRCDIR/libtest/test613.pl prepare %PWD/%LOGDIR/test%TESTNUMBER.dir
</precheck>
<name>
SFTP pre-quote chmod
</name>
<command>
--key %LOGDIR/server/curl_client_key --pubkey %LOGDIR/server/curl_client_key.pub -u %USER: -T %LOGDIR/file%TESTNUMBER.txt sftp://%HOSTIP:%SSHPORT%SSH_PWD/%LOGDIR/test%TESTNUMBER.dir/upload.txt -Q "chmod 444 %SSH_PWD/%LOGDIR/test%TESTNUMBER.dir/upload.txt" --list-only sftp://%HOSTIP:%SSHPORT%SSH_PWD/%LOGDIR/test%TESTNUMBER.dir/ --insecure
</command>
<file name="%LOGDIR/file%TESTNUMBER.txt">
Dummy test file for chmod test
</file>
</client>

#
# Verify data after the test has been "shot"
<verify>
<postcheck>
#%PERL %SRCDIR/libtest/test610.pl rm %PWD/%LOGDIR/file%TESTNUMBER.txt
%PERL %SRCDIR/libtest/test610.pl rm %PWD/%LOGDIR/test%TESTNUMBER.dir/upload.txt
%PERL %SRCDIR/libtest/test613.pl postprocess %PWD/%LOGDIR/test%TESTNUMBER.dir %PWD/%LOGDIR/curl%TESTNUMBER.out
</postcheck>
</verify>
</testcase>
